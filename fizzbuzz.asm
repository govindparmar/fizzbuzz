.386
.MODEL FLAT, STDCALL
.DATA
	INCLUDELIB MSVCRT
	EXTRN printf:PROC
	EXTRN puts:PROC
	FIZZ DB "Fizz", 0
	BUZZ DB "Buzz", 0
	CRLF DB 13, 10, 0
	FMT1 DB "%d", 0
	FMT2 DB "%s", 0
	FLAG DD 0
.CODE
MAIN PROC
	PUSH EBX
	PUSH ESI
	MOV EBX, 1
	MainLoop:
		MOV EDX, FLAG
		XOR EDX, EDX
		MOV FLAG, EDX
		MOV EAX, EBX
		CDQ
		MOV ESI, 3
		IDIV ESI
		CMP EDX, 0
		JNZ SkipFizz
		XOR EDX, EDX
		MOV EDX, FLAG
		INC EDX
		MOV FLAG, EDX
 		PUSH OFFSET FIZZ
		CALL printf
		ADD ESP, 4
	SkipFizz:
		MOV EAX, EBX
		CDQ
		MOV ESI, 5
		IDIV ESI
		CMP EDX, 0
		JNZ SkipBuzz
		XOR EDX, EDX
		MOV EDX, FLAG
		INC EDX
		MOV FLAG, EDX
		PUSH OFFSET BUZZ
		CALL printf
		ADD ESP, 4
	SkipBuzz:
		CMP FLAG, 0
		JNZ SkipNumber
		PUSH EBX
		PUSH OFFSET FMT1
		CALL printf
		ADD ESP, 8
	SkipNumber:
		PUSH OFFSET CRLF
		CALL printf
		ADD ESP, 4
		
		XOR EDX, EDX
		INC EBX
		CMP EBX, 100
	JLE MainLoop	
	POP ESI
	POP EBX
	RET
MAIN ENDP
END